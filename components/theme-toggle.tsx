"use client";

import { motion } from "framer-motion";
import { useTheme } from "next-themes";
import { useEffect, useState } from "react";

export default function ThemeToggle() {
  const ColorTheme = {
    Light: "light",
    Dark: "dark",
    System: "system",
  };

  const { theme, setTheme } = useTheme();
  const [isMounted, setIsMounted] = useState(false);

  useEffect(() => {
   setIsMounted(true);
  }, []);


  if (!isMounted) return null;

  return (
    <>
    <div className="w-full flex justify-center items-center md:w-auto md:block " suppressHydrationWarning>
      <div className="relative md:scale-100 origin-center">
        <motion.div
          className={`absolute w-32 h-10 top-0 px-[14px] left-0 flex items-center bg-opacity-[7%] border-whiteout/50 bg-whiteout rounded-full`}
          style={{
            justifyContent:
              theme === "system"
                ? "center"
                : theme === "light"
                ? "start"
                : theme === "dark"
                ? "end"
                : undefined,
          }}
        >
          <motion.div
            layout
            className=" w-[27px] h-[27px] bg-whiteout md:bg-schmarrn-dark dark:bg-whiteout rounded-full"
          ></motion.div>
        </motion.div>
        <div className="h-10 w-32 px-4 flex justify-between relative items-center  ">
          <button
            className="h-full w-[24%] flex items-center justify-center relative "
            onClick={() => setTheme("light")}
            title={"Light Mode"}
          >
            <svg
               
              width="17"
              height="17"
              viewBox="0 0 17 17"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              className={`${
                theme === ColorTheme.Light ? "fill-blackout" : "fill-whiteout"
              }`}
            >
              <g clipPath="url(#clip0_254_127)">
                <path d="M8.5 2.83305C8.2994 2.83305 8.12515 2.75939 7.97725 2.61205C7.82992 2.46415 7.75625 2.2899 7.75625 2.0893V1.4518C7.75625 1.2512 7.82992 1.07724 7.97725 0.929904C8.12515 0.782004 8.2994 0.708054 8.5 0.708054C8.7006 0.708054 8.87485 0.782004 9.02275 0.929904C9.17009 1.07724 9.24375 1.2512 9.24375 1.4518V2.0893C9.24375 2.2899 9.17009 2.46415 9.02275 2.61205C8.87485 2.75939 8.7006 2.83305 8.5 2.83305ZM8.5 16.292C8.2994 16.292 8.12515 16.218 7.97725 16.0701C7.82992 15.9228 7.75625 15.7488 7.75625 15.5482V14.9107C7.75625 14.7101 7.82992 14.5359 7.97725 14.388C8.12515 14.2406 8.2994 14.167 8.5 14.167C8.7006 14.167 8.87485 14.2406 9.02275 14.388C9.17009 14.5359 9.24375 14.7101 9.24375 14.9107V15.5482C9.24375 15.7488 9.17009 15.9228 9.02275 16.0701C8.87485 16.218 8.7006 16.292 8.5 16.292ZM14.9107 9.24375C14.7101 9.24375 14.5359 9.17009 14.388 9.02275C14.2406 8.87485 14.167 8.7006 14.167 8.5C14.167 8.2994 14.2406 8.12515 14.388 7.97725C14.5359 7.82992 14.7101 7.75625 14.9107 7.75625H15.5482C15.7488 7.75625 15.9228 7.82992 16.0701 7.97725C16.218 8.12515 16.292 8.2994 16.292 8.5C16.292 8.7006 16.218 8.87485 16.0701 9.02275C15.9228 9.17009 15.7488 9.24375 15.5482 9.24375H14.9107ZM1.4518 9.24375C1.2512 9.24375 1.07724 9.17009 0.929904 9.02275C0.782004 8.87485 0.708054 8.7006 0.708054 8.5C0.708054 8.2994 0.782004 8.12515 0.929904 7.97725C1.07724 7.82992 1.2512 7.75625 1.4518 7.75625H2.0893C2.2899 7.75625 2.46415 7.82992 2.61205 7.97725C2.75939 8.12515 2.83305 8.2994 2.83305 8.5C2.83305 8.7006 2.75939 8.87485 2.61205 9.02275C2.46415 9.17009 2.2899 9.24375 2.0893 9.24375H1.4518ZM12.7322 4.26785C12.5905 4.12619 12.5197 3.95194 12.5197 3.7451C12.5197 3.53884 12.5905 3.36487 12.7322 3.2232L12.9625 2.99285C13.1042 2.85119 13.2725 2.77724 13.4674 2.771C13.6623 2.76534 13.8363 2.83929 13.9893 2.99285C14.131 3.13452 14.2018 3.30849 14.2018 3.51475C14.2018 3.72159 14.131 3.89584 13.9893 4.0375L13.7598 4.2857C13.6181 4.42737 13.4498 4.4982 13.2549 4.4982C13.06 4.4982 12.8857 4.42142 12.7322 4.26785ZM3.0277 13.9893C2.88604 13.8476 2.8152 13.6765 2.8152 13.4759C2.8152 13.2753 2.88604 13.1042 3.0277 12.9625L3.2759 12.7143C3.41757 12.5726 3.58587 12.5049 3.7808 12.5112C3.97574 12.5168 4.14404 12.5905 4.2857 12.7322C4.42737 12.8738 4.4982 13.045 4.4982 13.2456C4.4982 13.4467 4.42737 13.6181 4.2857 13.7598L4.0375 14.0072C3.89584 14.1488 3.72754 14.2168 3.5326 14.2112C3.33767 14.2049 3.16937 14.131 3.0277 13.9893ZM12.9447 13.9723L12.7143 13.7598C12.5726 13.6181 12.5018 13.4498 12.5018 13.2549C12.5018 13.06 12.5786 12.8857 12.7322 12.7322C12.8738 12.5905 13.0481 12.5197 13.2549 12.5197C13.4612 12.5197 13.6351 12.5905 13.7768 12.7322L13.9893 12.9447C14.131 13.0863 14.2049 13.2546 14.2112 13.4496C14.2168 13.6445 14.1429 13.8187 13.9893 13.9723C13.8476 14.114 13.6737 14.1848 13.4674 14.1848C13.2606 14.1848 13.0863 14.114 12.9447 13.9723ZM3.2402 4.26785L2.99285 4.0375C2.85119 3.89584 2.78035 3.72754 2.78035 3.5326C2.78035 3.33767 2.85714 3.1637 3.0107 3.0107C3.15237 2.86904 3.32634 2.7982 3.5326 2.7982C3.73944 2.7982 3.91369 2.86904 4.05535 3.0107L4.2857 3.2402C4.42737 3.38187 4.50104 3.55017 4.5067 3.7451C4.51237 3.94004 4.4387 4.11429 4.2857 4.26785C4.14404 4.40952 3.96979 4.48035 3.76295 4.48035C3.55612 4.48035 3.38187 4.40952 3.2402 4.26785ZM8.5 12.8027C7.30774 12.8027 6.29255 12.3837 5.45445 11.5456C4.61635 10.7075 4.1973 9.69227 4.1973 8.5C4.1973 7.30774 4.61635 6.29255 5.45445 5.45445C6.29255 4.61635 7.30774 4.1973 8.5 4.1973C9.69227 4.1973 10.7075 4.61635 11.5456 5.45445C12.3837 6.29255 12.8027 7.30774 12.8027 8.5C12.8027 9.69227 12.3837 10.7075 11.5456 11.5456C10.7075 12.3837 9.69227 12.8027 8.5 12.8027ZM8.5 11.3152C9.27917 11.3152 9.9433 11.0409 10.4924 10.4924C11.0409 9.9433 11.3152 9.27917 11.3152 8.5C11.3152 7.72084 11.0409 7.0567 10.4924 6.5076C9.9433 5.95907 9.27917 5.6848 8.5 5.6848C7.72084 5.6848 7.0567 5.95907 6.5076 6.5076C5.95907 7.0567 5.6848 7.72084 5.6848 8.5C5.6848 9.27917 5.95907 9.9433 6.5076 10.4924C7.0567 11.0409 7.72084 11.3152 8.5 11.3152Z" />
              </g>
              <defs>
                <clipPath id="clip0_254_127">
                  <rect width="17" height="17" fill="white" />
                </clipPath>
              </defs>
            </svg>
          </button>

          <button
          className="h-full w-[52%] flex items-center justify-center relative "
            onClick={() => setTheme("system")}
            title={
              "System Preference"
            }
          >
            <svg
              width="17"
              height="17"
              viewBox="0 0 17 17"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              className={`${
                theme === "system" ? "fill-blackout" : "fill-whiteout"
              }`}
            >
              <path d="M2.90445 12.6438C2.49135 12.6438 2.14002 12.4993 1.85045 12.2103C1.56145 11.9207 1.41695 11.5694 1.41695 11.1563V3.6125C1.41695 3.1994 1.56145 2.84807 1.85045 2.5585C2.14002 2.2695 2.49135 2.125 2.90445 2.125H14.0956C14.5087 2.125 14.86 2.2695 15.1496 2.5585C15.4386 2.84807 15.5831 3.1994 15.5831 3.6125V11.1563C15.5831 11.5694 15.4386 11.9207 15.1496 12.2103C14.86 12.4993 14.5087 12.6438 14.0956 12.6438H2.90445ZM2.90445 11.1563H14.0956V3.6125H2.90445V11.1563ZM1.4518 14.875C1.2512 14.875 1.07724 14.8013 0.929904 14.654C0.782004 14.5061 0.708054 14.3319 0.708054 14.1313C0.708054 13.9307 0.782004 13.7564 0.929904 13.6085C1.07724 13.4612 1.2512 13.3875 1.4518 13.3875H15.5482C15.7488 13.3875 15.9228 13.4612 16.0701 13.6085C16.218 13.7564 16.292 13.9307 16.292 14.1313C16.292 14.3319 16.218 14.5061 16.0701 14.654C15.9228 14.8013 15.7488 14.875 15.5482 14.875H1.4518Z" />
            </svg>
          </button>

          <button
          className="h-full w-[24%] flex items-center justify-center relative "
            onClick={() => setTheme("dark")}
            title={"Dark Mode"}
          >
            <svg
              width="17"
              height="17"
              viewBox="0 0 17 17"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              className={`${
                theme === "dark" ? "fill-blackout" : "fill-whiteout"
              }`}
            >
              <path d="M8.5 14.875C6.72917 14.875 5.2241 14.2551 3.9848 13.0152C2.74493 11.7759 2.125 10.2708 2.125 8.50001C2.125 6.90654 2.61488 5.54002 3.59465 4.40046C4.57442 3.26146 5.83185 2.55029 7.36695 2.26696C7.81518 2.18422 8.14272 2.26384 8.34955 2.50581C8.55638 2.74777 8.54165 3.09316 8.30535 3.54196C8.16368 3.81339 8.05432 4.09672 7.97725 4.39196C7.90075 4.68719 7.8625 4.99404 7.8625 5.31251C7.8625 6.37501 8.23423 7.27827 8.9777 8.02231C9.72173 8.76577 10.625 9.13751 11.6875 9.13751C12.006 9.13751 12.3128 9.09926 12.6081 9.02276C12.9033 8.94569 13.1866 8.83632 13.4581 8.69466C13.9188 8.45836 14.2701 8.43484 14.5121 8.62411C14.754 8.81281 14.8336 9.13156 14.7509 9.58036C14.4914 11.0917 13.7978 12.3519 12.6701 13.3612C11.543 14.3704 10.153 14.875 8.5 14.875ZM8.5 13.3875C9.51547 13.3875 10.4216 13.1217 11.2183 12.5902C12.015 12.0592 12.6024 11.3509 12.9804 10.4652C12.7679 10.5247 12.5554 10.5661 12.3429 10.5893C12.1304 10.6131 11.9119 10.625 11.6875 10.625C10.2119 10.625 8.95758 10.1085 7.92455 9.07546C6.89152 8.04242 6.375 6.78811 6.375 5.31251C6.375 5.08811 6.3869 4.86966 6.4107 4.65716C6.43393 4.44466 6.4753 4.23216 6.5348 4.01966C5.6491 4.39762 4.94077 4.98497 4.4098 5.78171C3.87827 6.57844 3.6125 7.48454 3.6125 8.50001C3.6125 9.85774 4.08765 11.0118 5.03795 11.9621C5.98825 12.9124 7.14227 13.3875 8.5 13.3875Z" />
            </svg>
          </button>
        </div>
      </div>
    </div>
    </>
  );
}
